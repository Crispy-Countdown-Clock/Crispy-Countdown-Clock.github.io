<!DOCTYPE html>

<head>

    <title>Crispy Countdown</title>

    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/@coreui/coreui@5.2.0/dist/css/coreui.min.css" rel="stylesheet" integrity="sha384-u3h5SFn5baVOWbh8UkOrAaLXttgSF0vXI15ODtCSxl0v/VKivnCN6iHCcvlyTL7L" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@coreui/coreui@5.2.0/dist/js/coreui.bundle.min.js" integrity="sha384-JdRP5GRWP6APhoVS1OM/pOKMWe7q9q8hpl+J2nhCfVJKoS+yzGtELC5REIYKrymn" crossorigin="anonymous"></script>

    <!-- <style>
        #sortable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
        #sortable li { margin: 0 3px 3px 3px; padding: 0.4em; padding-left: 1.5em; font-size: 1.4em; height: 18px; }
        #sortable li span { position: absolute; margin-left: -1.3em; }
    </style> -->
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"></script>
    
    <script>
    $( function() {
        $( "#sortable" ).sortable();
    } );
    </script>

</head>


<body>

    <!-- <ul id="sortable">
        <li ><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>11111</li>
        <li ><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>222222</li>
        <li ><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>3333333</li>
    </ul> -->

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4">
                <h3>
                    <a href="./calendar.html">Calendar</a>
                </h3>
            </div>

            <div class="col-md-4">
                <img class="center-block" alt="countdown clock probably" src="i dont know yet" />
                <h3 class="text-center" id="timerText">
                    20:00
                </h3>
                <div class="row">
                    <div class="col-md-6">
                        <img alt="play icon" id="playButton" src="i dont know yet" />
                    </div>
                    <div class="col-md-6">
                        <img alt="pause icon" id="pauseButton" src="i dont know yet" />
                    </div>
                </div>
                <!-- <div class="container-fluid"> -->
                    <div class="row">
                        <div class="col-md-12">
                            <h3>
                                Daily tasks
                            </h3>
                            <ol class="list-unstyled" id="sortable">
                                <li class="list-item">
                                    do homework
                                    <!-- Button trigger modal -->
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editTaskModal"
                                    data-shartText="hello Sigma">
                                        Edit Icon
                                    </button>
                                    <button type="button" class="btn btn-danger deleteTaskButton">Delete</button>
                                </li>

                                <li class="list-item">
                                    do dishes
                                    <!-- Button trigger modal -->
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editTaskModal"
                                    data-shartText="sigmatic compression engine">
                                        Edit Icon
                                    </button>
                                    <button type="button" class="btn btn-danger deleteTaskButton">Delete</button>
                                </li>

                            </ol>

                            <button type="button" class="btn btn-success" id="addTaskButton">Add Task</button>

                        </div>
                    </div>
                <!-- </div> -->
            </div>

            <div class="col-md-4">
                calndar
                <div class="d-flex justify-content-center">
                    <div
                      class="border rounded"
                      data-coreui-locale="en-US"
                      data-coreui-start-date="2024/02/13"
                      data-coreui-toggle="calendar"
                    ></div>
                  </div>
            </div>
        </div>
    </div>

    <!-- Edit Task Modal -->
    <div class="modal fade" id="editTaskModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Edit Task</h5>
                    <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                </div>

                <div class="modal-body">
                    <input type="text" id="editTaskInput">
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Discard Changes</button>
                    <button type="button" class="btn btn-primary" id="editTakeSaveBtn">Save</button>
                </div>

            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const editTaskModal = document.getElementById("editTaskModal");
            const editTaskInput = document.getElementById("editTaskInput");
            const editTakeSaveBtn = document.getElementById("editTakeSaveBtn");
            let currentTaskElement = null; // To store the task being edited
    
            // Triggered when the modal is about to be shown
            editTaskModal.addEventListener('show.bs.modal', (event) => {
                // Get the button that triggered the modal
                const button = event.relatedTarget;
    
                // Retrieve the parent task element
                currentTaskElement = button.closest('li');
    
                // Retrieve the data-shartText attribute
                const shartText = button.getAttribute("data-shartText");
    
                // Populate the input field with the task's text
                editTaskInput.value = shartText;
            });
    
            // Update the task when "Save" is clicked
            editTakeSaveBtn.addEventListener('click', () => {
                if (currentTaskElement) {
                    // Update the task's text with the input value
                    const newTaskText = editTaskInput.value;
    
                    // Find the text node and update it
                    currentTaskElement.childNodes[0].textContent = newTaskText + ' ';
    
                    // Update the data-shartText attribute of the edit button
                    const editButton = currentTaskElement.querySelector('[data-bs-toggle="modal"]');
                    editButton.setAttribute('data-shartText', newTaskText);
    
                    // Close the modal
                    const modalInstance = bootstrap.Modal.getInstance(editTaskModal);
                    modalInstance.hide();
                }
            });
        });
    </script>
    

    <script>
        // Triggered when the modal is about to be shown
        document.addEventListener("DOMContentLoaded", () => {
            const editTaskModal = document.getElementById("editTaskModal");
            const editTaskInput = document.getElementById("editTaskInput");
    
            editTaskModal.addEventListener('show.bs.modal', (event) => {
                // Get the button that triggered the modal
                const button = event.relatedTarget;
    
                // Retrieve the data-shartText attribute
                const shartText = button.getAttribute("data-shartText");
    
                // Populate the input field with the task's text
                editTaskInput.value = shartText;
            });
        });
    </script>

    <script>
        let countdownInterval; // Store the timer interval
        let remainingTime = 20 * 60; // 20 minutes in seconds
        let isPaused = false; // Track pause/resume state

        // Function to update the timer text
        function updateTimerText() {
            const minutes = Math.floor(remainingTime / 60).toString().padStart(2, '0');
            const seconds = (remainingTime % 60).toString().padStart(2, '0');
            document.getElementById("timerText").textContent = `${minutes}:${seconds}`;
        }

        // Function to start the countdown
        function startCountdown() {
            if (countdownInterval || remainingTime <= 0) return; // Avoid multiple intervals
            countdownInterval = setInterval(() => {
                if (!isPaused) {
                    if (remainingTime > 0) {
                        remainingTime--;
                        updateTimerText();
                    } else {
                        clearInterval(countdownInterval);
                        countdownInterval = null; // Timer ends
                        alert("Time's up!");
                    }
                }
            }, 1000);
        }

        // Function to toggle pause/resume
        function togglePause() {
            isPaused = !isPaused; // Toggle state
        }

        // Add event listeners to play and pause buttons
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("playButton").addEventListener("click", startCountdown);
            document.getElementById("pauseButton").addEventListener("click", togglePause);
            updateTimerText(); // Initialize timer display
        });
    </script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const taskList = document.getElementById("sortable"); // The list element
        const addTaskButton = document.getElementById("addTaskButton"); // The "Add Task" button

        // Function to create a new task element
        function createTaskElement(taskText) {
            const newTask = document.createElement("li");
            newTask.className = "list-item";
            newTask.innerHTML = `
                ${taskText}
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editTaskModal"
                    data-shartText="${taskText}">
                    Edit Icon
                </button>
                <button type="button" class="btn btn-danger deleteTaskButton">Delete</button>
            `;

            // Add delete functionality to the delete button of the task
            newTask.querySelector('.deleteTaskButton').addEventListener('click', () => {
                newTask.remove();
            });

            return newTask;
        }

        // Add event listener to "Add Task" button
        addTaskButton.addEventListener("click", () => {
            // Prompt the user for the task text
            const taskText = prompt("Enter the new task:");

            if (taskText) {
                // Create and append the new task
                const newTask = createTaskElement(taskText);
                taskList.appendChild(newTask);
            }
        });

        // Add delete functionality to existing tasks on page load
        taskList.querySelectorAll('.deleteTaskButton').forEach(button => {
            button.addEventListener('click', (e) => {
                e.target.closest('li').remove();
            });
        });
    });
</script>


</body>


</html>